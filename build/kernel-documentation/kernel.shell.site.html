<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>kernel.shell.site documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Kernel</span> <span class="project-version">SNAPSHOT</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>kernel</span></div></div></li><li class="depth-2 branch"><a href="kernel.api.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>api</span></div></a></li><li class="depth-2"><a href="kernel.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-3 branch"><a href="kernel.core.causal-dag.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>causal-dag</span></div></a></li><li class="depth-3 branch"><a href="kernel.core.compound-operation.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>compound-operation</span></div></a></li><li class="depth-3 branch"><a href="kernel.core.conflict-cache.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>conflict-cache</span></div></a></li><li class="depth-3 branch"><a href="kernel.core.conflict-relation.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>conflict-relation</span></div></a></li><li class="depth-3 branch"><a href="kernel.core.conflict-resolution.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>conflict-resolution</span></div></a></li><li class="depth-3 branch"><a href="kernel.core.feature-model.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>feature-model</span></div></a></li><li class="depth-3 branch"><a href="kernel.core.garbage-collector.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>garbage-collector</span></div></a></li><li class="depth-3 branch"><a href="kernel.core.history-buffer.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>history-buffer</span></div></a></li><li class="depth-3 branch"><a href="kernel.core.message.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>message</span></div></a></li><li class="depth-3 branch"><a href="kernel.core.movic.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>movic</span></div></a></li><li class="depth-3 branch"><a href="kernel.core.primitive-operation.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>primitive-operation</span></div></a></li><li class="depth-3 branch"><a href="kernel.core.topological-sort.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>topological-sort</span></div></a></li><li class="depth-3"><a href="kernel.core.vector-clock.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>vector-clock</span></div></a></li><li class="depth-2 branch"><a href="kernel.helpers.html"><div class="inner"><span class="tree" style="top: -424px;"><span class="top" style="height: 433px;"></span><span class="bottom"></span></span><span>helpers</span></div></a></li><li class="depth-2 branch"><a href="kernel.i18n.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>i18n</span></div></a></li><li class="depth-2"><a href="kernel.shell.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>shell</span></div></a></li><li class="depth-3 branch"><a href="kernel.shell.client.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>client</span></div></a></li><li class="depth-3 branch"><a href="kernel.shell.context.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>context</span></div></a></li><li class="depth-3 branch"><a href="kernel.shell.server.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>server</span></div></a></li><li class="depth-3 current"><a href="kernel.shell.site.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>site</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="kernel.shell.site.html#var-combined-effect.21"><div class="inner"><span>combined-effect!</span></div></a></li><li class="depth-1"><a href="kernel.shell.site.html#var-GC.21"><div class="inner"><span>GC!</span></div></a></li><li class="depth-1"><a href="kernel.shell.site.html#var-initialize-context-mesh-topology"><div class="inner"><span>initialize-context-mesh-topology</span></div></a></li><li class="depth-1"><a href="kernel.shell.site.html#var-receive-heartbeat.21"><div class="inner"><span>receive-heartbeat!</span></div></a></li><li class="depth-1"><a href="kernel.shell.site.html#var-receive-leave.21"><div class="inner"><span>receive-leave!</span></div></a></li><li class="depth-1"><a href="kernel.shell.site.html#var-receive-message.21"><div class="inner"><span>receive-message!</span></div></a></li><li class="depth-1"><a href="kernel.shell.site.html#var-receive-operation.21"><div class="inner"><span>receive-operation!</span></div></a></li><li class="depth-1"><a href="kernel.shell.site.html#var-resolve-conflict.21"><div class="inner"><span>resolve-conflict!</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">kernel.shell.site</h1><div class="doc"><div class="markdown"><p>Site control shared both by clients and the server.</p>
<p>Generates and receives messages at a site. Modifies the global context. Site control operations are assumed to run atomically in a single thread, no synchronization is performed.</p></div></div><div class="public anchor" id="var-combined-effect.21"><h3>combined-effect!</h3><div class="usage"><code>(combined-effect!)</code></div><div class="doc"><div class="markdown"><p>Calculates the next combined effect, which is a feature model or conflict descriptor, stores it in the context and returns it.</p></div></div><div class="src-link"><a href="https://github.com/ekuiter/variED/blob/6d3070ae5e83bec40fab2465efdf4bc3f95ec526/kernel/src/kernel/shell/site.cljc#L39">view source</a></div></div><div class="public anchor" id="var-GC.21"><h3>GC!</h3><div class="usage"><code>(GC!)</code></div><div class="doc"><div class="markdown"><p>Runs the garbage collector at a site. Updates the global context.</p></div></div><div class="src-link"><a href="https://github.com/ekuiter/variED/blob/6d3070ae5e83bec40fab2465efdf4bc3f95ec526/kernel/src/kernel/shell/site.cljc#L123">view source</a></div></div><div class="public anchor" id="var-initialize-context-mesh-topology"><h3>initialize-context-mesh-topology</h3><div class="usage"><code>(initialize-context-mesh-topology site-ID initial-FM)</code></div><div class="doc"><div class="markdown"><p>Initializes global context for a new site in a mesh topology. Called when the site is ready to generate and receive operations.</p></div></div><div class="src-link"><a href="https://github.com/ekuiter/variED/blob/6d3070ae5e83bec40fab2465efdf4bc3f95ec526/kernel/src/kernel/shell/site.cljc#L24">view source</a></div></div><div class="public anchor" id="var-receive-heartbeat.21"><h3>receive-heartbeat!</h3><div class="usage"><code>(receive-heartbeat! message)</code></div><div class="doc"><div class="markdown"><p>Receives a heartbeat message at a site. Updates the global context and returns the (updated) combined effect.</p></div></div><div class="src-link"><a href="https://github.com/ekuiter/variED/blob/6d3070ae5e83bec40fab2465efdf4bc3f95ec526/kernel/src/kernel/shell/site.cljc#L67">view source</a></div></div><div class="public anchor" id="var-receive-leave.21"><h3>receive-leave!</h3><div class="usage"><code>(receive-leave! message)</code></div><div class="doc"><div class="markdown"><p>Receives a leave message at a site. Updates the global context and returns the (updated) combined effect.</p></div></div><div class="src-link"><a href="https://github.com/ekuiter/variED/blob/6d3070ae5e83bec40fab2465efdf4bc3f95ec526/kernel/src/kernel/shell/site.cljc#L76">view source</a></div></div><div class="public anchor" id="var-receive-message.21"><h3>receive-message!</h3><div class="usage"><code>(receive-message! message)</code></div><div class="doc"><div class="markdown"><p>Receives a message at a site. If a server vector clock is attached, updates its garbage collector (irrelevant for mesh topologies). Checks which kind of message has been received and dispatches to the according receive function. Returns the (updated) combined effect.</p></div></div><div class="src-link"><a href="https://github.com/ekuiter/variED/blob/6d3070ae5e83bec40fab2465efdf4bc3f95ec526/kernel/src/kernel/shell/site.cljc#L87">view source</a></div></div><div class="public anchor" id="var-receive-operation.21"><h3>receive-operation!</h3><div class="usage"><code>(receive-operation! CO)</code></div><div class="doc"><div class="markdown"><p>Receives an operation message at a site. Extracts the operation from the message, then updating the global context. Calls the MOVIC algorithm with the new operation <em>after</em> the CDAG, HB and CC have been updated. Returns the (updated) combined effect.</p></div></div><div class="src-link"><a href="https://github.com/ekuiter/variED/blob/6d3070ae5e83bec40fab2465efdf4bc3f95ec526/kernel/src/kernel/shell/site.cljc#L49">view source</a></div></div><div class="public anchor" id="var-resolve-conflict.21"><h3>resolve-conflict!</h3><div class="usage"><code>(resolve-conflict! MCG-ID)</code></div><div class="doc"><div class="markdown"><p>After all sites have (externally) agreed on a resolved version, this function resolves the conflict by resetting the system to its initial state, only with the resolved MCGâ€™s operations included in the new initial feature model. This is possible because all sites are synchronized at this point, and all CDAGs, HBs etc. are equal across sites. In that case, they can all effectively be garbage-collected, i.e. re-initialized.</p></div></div><div class="src-link"><a href="https://github.com/ekuiter/variED/blob/6d3070ae5e83bec40fab2465efdf4bc3f95ec526/kernel/src/kernel/shell/site.cljc#L102">view source</a></div></div></div></body></html>