<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>kernel.core.topological-sort documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Kernel</span> <span class="project-version">SNAPSHOT</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>kernel</span></div></div></li><li class="depth-2 branch"><a href="kernel.api.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>api</span></div></a></li><li class="depth-2"><a href="kernel.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-3 branch"><a href="kernel.core.causal-dag.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>causal-dag</span></div></a></li><li class="depth-3 branch"><a href="kernel.core.compound-operation.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>compound-operation</span></div></a></li><li class="depth-3 branch"><a href="kernel.core.conflict-cache.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>conflict-cache</span></div></a></li><li class="depth-3 branch"><a href="kernel.core.conflict-relation.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>conflict-relation</span></div></a></li><li class="depth-3 branch"><a href="kernel.core.conflict-resolution.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>conflict-resolution</span></div></a></li><li class="depth-3 branch"><a href="kernel.core.feature-model.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>feature-model</span></div></a></li><li class="depth-3 branch"><a href="kernel.core.garbage-collector.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>garbage-collector</span></div></a></li><li class="depth-3 branch"><a href="kernel.core.history-buffer.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>history-buffer</span></div></a></li><li class="depth-3 branch"><a href="kernel.core.message.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>message</span></div></a></li><li class="depth-3 branch"><a href="kernel.core.movic.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>movic</span></div></a></li><li class="depth-3 branch"><a href="kernel.core.primitive-operation.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>primitive-operation</span></div></a></li><li class="depth-3 branch current"><a href="kernel.core.topological-sort.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>topological-sort</span></div></a></li><li class="depth-3"><a href="kernel.core.vector-clock.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>vector-clock</span></div></a></li><li class="depth-2 branch"><a href="kernel.helpers.html"><div class="inner"><span class="tree" style="top: -424px;"><span class="top" style="height: 433px;"></span><span class="bottom"></span></span><span>helpers</span></div></a></li><li class="depth-2 branch"><a href="kernel.i18n.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>i18n</span></div></a></li><li class="depth-2"><a href="kernel.shell.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>shell</span></div></a></li><li class="depth-3 branch"><a href="kernel.shell.client.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>client</span></div></a></li><li class="depth-3 branch"><a href="kernel.shell.context.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>context</span></div></a></li><li class="depth-3 branch"><a href="kernel.shell.server.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>server</span></div></a></li><li class="depth-3"><a href="kernel.shell.site.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>site</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="kernel.core.topological-sort.html#var-apply-compatible*"><div class="inner"><span>apply-compatible*</span></div></a></li><li class="depth-1"><a href="kernel.core.topological-sort.html#var-CO-dependency-map"><div class="inner"><span>CO-dependency-map</span></div></a></li><li class="depth-1"><a href="kernel.core.topological-sort.html#var-CO-topological-sort"><div class="inner"><span>CO-topological-sort</span></div></a></li><li class="depth-1"><a href="kernel.core.topological-sort.html#var-remove-items"><div class="inner"><span>remove-items</span></div></a></li><li class="depth-1"><a href="kernel.core.topological-sort.html#var-single-dependency-map"><div class="inner"><span>single-dependency-map</span></div></a></li><li class="depth-1"><a href="kernel.core.topological-sort.html#var-sources"><div class="inner"><span>sources</span></div></a></li><li class="depth-1"><a href="kernel.core.topological-sort.html#var-topological-sort"><div class="inner"><span>topological-sort</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">kernel.core.topological-sort</h1><div class="doc"><div class="markdown"><p>Sorts a set of compatible operations topologically according to <a href="kernel.core.compound-operation.html#var-preceding.3F">kernel.core.compound-operation/preceding?</a>.</p>
<p>Sometimes, a site has to apply a given set of operations to a feature model. The order of operations matters, but there is a solution if the operations are pairwise compatible. In that case, it can be proven that operations commute if they are concurrent. Order of operations then only matters for causal chains of operations in the set. For example, if {A, B, C} should be sorted where A || B and B -&gt; C, a valid order can execute A at any time, but has to execute B before C. This corresponds to a topological sorting of the operation set using the causally-preceding relation.</p>
<p>Topological sort is not guaranteed to be unique, but as concurrent operations commute, the resulting feature model is guaranteed to be equal for any topological sorting (and therefore across all sites).</p>
<p>Algorithm adapted from rosettacode.org.</p></div></div><div class="public anchor" id="var-apply-compatible*"><h3>apply-compatible*</h3><div class="usage"><code>(apply-compatible* CDAG HB FM CO-IDs)</code></div><div class="doc"><div class="markdown"><p>Applies a set of compatible compound operations to a feature model. First, sorts the operations topologically with <a href="kernel.core.topological-sort.html#var-CO-topological-sort">CO-topological-sort</a>, then applies the operations in that order.</p></div></div><div class="src-link"><a href="https://github.com/ekuiter/variED/blob/590fcddee50b87dd25a5886c50bf73b329d681bd/kernel/src/kernel/core/topological_sort.cljc#L69">view source</a></div></div><div class="public anchor" id="var-CO-dependency-map"><h3>CO-dependency-map</h3><div class="usage"><code>(CO-dependency-map CDAG CO-IDs)</code></div><div class="doc"><div class="markdown"><p>Constructs a dependency map from operations to their CIPs, only including direct dependencies (CIP) that are in the set of operations to be sorted.</p></div></div><div class="src-link"><a href="https://github.com/ekuiter/variED/blob/590fcddee50b87dd25a5886c50bf73b329d681bd/kernel/src/kernel/core/topological_sort.cljc#L57">view source</a></div></div><div class="public anchor" id="var-CO-topological-sort"><h3>CO-topological-sort</h3><div class="usage"><code>(CO-topological-sort CDAG CO-IDs)</code></div><div class="doc"><div class="markdown"><p>Sorts a set of compatible operations topologically according to the causally-preceding relation.</p></div></div><div class="src-link"><a href="https://github.com/ekuiter/variED/blob/590fcddee50b87dd25a5886c50bf73b329d681bd/kernel/src/kernel/core/topological_sort.cljc#L63">view source</a></div></div><div class="public anchor" id="var-remove-items"><h3>remove-items</h3><div class="usage"><code>(remove-items deps items)</code></div><div class="doc"><div class="markdown"><p>Returns a dependence map with the specified items removed from keys and from all dependence sets of remaining keys.</p></div></div><div class="src-link"><a href="https://github.com/ekuiter/variED/blob/590fcddee50b87dd25a5886c50bf73b329d681bd/kernel/src/kernel/core/topological_sort.cljc#L36">view source</a></div></div><div class="public anchor" id="var-single-dependency-map"><h3>single-dependency-map</h3><div class="usage"><code>(single-dependency-map item items)</code></div><div class="doc"><div class="markdown"><p>Constructs a single-key dependence, represented as a map from item to a set of items, ensuring that item is not in the set.</p></div></div><div class="src-link"><a href="https://github.com/ekuiter/variED/blob/590fcddee50b87dd25a5886c50bf73b329d681bd/kernel/src/kernel/core/topological_sort.cljc#L25">view source</a></div></div><div class="public anchor" id="var-sources"><h3>sources</h3><div class="usage"><code>(sources deps)</code></div><div class="doc"><div class="markdown"><p>Returns all keys from the argument which have no (i.e. empty) dependencies.</p></div></div><div class="src-link"><a href="https://github.com/ekuiter/variED/blob/590fcddee50b87dd25a5886c50bf73b329d681bd/kernel/src/kernel/core/topological_sort.cljc#L31">view source</a></div></div><div class="public anchor" id="var-topological-sort"><h3>topological-sort</h3><div class="usage"><code>(topological-sort deps)</code></div><div class="doc"><div class="markdown"><p>Given a dependence map assumed to have no cycles, returns a list of items in which each item follows all of its successors.</p></div></div><div class="src-link"><a href="https://github.com/ekuiter/variED/blob/590fcddee50b87dd25a5886c50bf73b329d681bd/kernel/src/kernel/core/topological_sort.cljc#L45">view source</a></div></div></div></body></html>