<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>kernel.core.conflict-cache documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Kernel</span> <span class="project-version">SNAPSHOT</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>kernel</span></div></div></li><li class="depth-2 branch"><a href="kernel.api.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>api</span></div></a></li><li class="depth-2"><a href="kernel.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-3 branch"><a href="kernel.core.causal-dag.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>causal-dag</span></div></a></li><li class="depth-3 branch"><a href="kernel.core.compound-operation.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>compound-operation</span></div></a></li><li class="depth-3 branch current"><a href="kernel.core.conflict-cache.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>conflict-cache</span></div></a></li><li class="depth-3 branch"><a href="kernel.core.conflict-relation.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>conflict-relation</span></div></a></li><li class="depth-3 branch"><a href="kernel.core.feature-model.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>feature-model</span></div></a></li><li class="depth-3 branch"><a href="kernel.core.garbage-collector.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>garbage-collector</span></div></a></li><li class="depth-3 branch"><a href="kernel.core.history-buffer.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>history-buffer</span></div></a></li><li class="depth-3 branch"><a href="kernel.core.message.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>message</span></div></a></li><li class="depth-3 branch"><a href="kernel.core.movic.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>movic</span></div></a></li><li class="depth-3 branch"><a href="kernel.core.primitive-operation.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>primitive-operation</span></div></a></li><li class="depth-3 branch"><a href="kernel.core.topological-sort.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>topological-sort</span></div></a></li><li class="depth-3"><a href="kernel.core.vector-clock.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>vector-clock</span></div></a></li><li class="depth-2 branch"><a href="kernel.helpers.html"><div class="inner"><span class="tree" style="top: -393px;"><span class="top" style="height: 402px;"></span><span class="bottom"></span></span><span>helpers</span></div></a></li><li class="depth-2"><a href="kernel.shell.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>shell</span></div></a></li><li class="depth-3 branch"><a href="kernel.shell.client.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>client</span></div></a></li><li class="depth-3 branch"><a href="kernel.shell.context.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>context</span></div></a></li><li class="depth-3 branch"><a href="kernel.shell.server.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>server</span></div></a></li><li class="depth-3"><a href="kernel.shell.site.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>site</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="kernel.core.conflict-cache.html#var-_remove"><div class="inner"><span>_remove</span></div></a></li><li class="depth-1"><a href="kernel.core.conflict-cache.html#var-conflict.3F"><div class="inner"><span>conflict?</span></div></a></li><li class="depth-1"><a href="kernel.core.conflict-cache.html#var-get-conflict"><div class="inner"><span>get-conflict</span></div></a></li><li class="depth-1"><a href="kernel.core.conflict-cache.html#var-hittable.3F"><div class="inner"><span>hittable?</span></div></a></li><li class="depth-1"><a href="kernel.core.conflict-cache.html#var-initialize"><div class="inner"><span>initialize</span></div></a></li><li class="depth-1"><a href="kernel.core.conflict-cache.html#var-insert"><div class="inner"><span>insert</span></div></a></li><li class="depth-1"><a href="kernel.core.conflict-cache.html#var-make-conflict"><div class="inner"><span>make-conflict</span></div></a></li><li class="depth-1"><a href="kernel.core.conflict-cache.html#var-with-most-recent"><div class="inner"><span>with-most-recent</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">kernel.core.conflict-cache</h1><div class="doc"><div class="markdown"><p>Conflict Cache, CC for short. Caches all conflicts a site detected.</p>
<p>The conflict cache is only a performance optimization and not essential. It is useful because conflict detection is pure (always yields the same results) and expensive.</p>
<p>Conflicts are cached by mapping from pairs of conflicting operations to a Conflict record, which currently stores the human-readable reason for the conflict.</p>
<p>Note that only conflicts are stored. If two operations are compatible, nothing is stored (this is the expected case). Therefore, the most recently arrived operation is saved (if any). This is used to identify whether the cache may be used (<a href="kernel.core.conflict-cache.html#var-hittable.3F">hittable?</a>).</p>
<p>As the conflict detection also considers conflict-succeeding operations a conflict, those operations will also be stored in the conflict cache.</p>
<p>Without garbage collection, the conflict cache may grow quadratically with time.</p></div></div><div class="public anchor" id="var-_remove"><h3>_remove</h3><div class="usage"><code>(_remove CC CO-ID)</code></div><div class="doc"><div class="markdown"><p>Removes all conflicts which involve a given operation in O(n). Called by the garbage collector, which is in turn only called between operation generation/reception, i.e., the most recent compound operation is always nil and does not have to be checked.</p></div></div><div class="src-link"><a href="https://github.com/ekuiter/variED/blob/1792825656c19cb9586e73fc29ec2c3e5e6fd94b/kernel/src/kernel/core/conflict_cache.cljc#L77">view source</a></div></div><div class="public anchor" id="var-conflict.3F"><h3>conflict?</h3><div class="usage"><code>(conflict? conflict)</code></div><div class="doc"><div class="markdown"><p>Returns whether a given object is a Conflict record.</p></div></div><div class="src-link"><a href="https://github.com/ekuiter/variED/blob/1792825656c19cb9586e73fc29ec2c3e5e6fd94b/kernel/src/kernel/core/conflict_cache.cljc#L32">view source</a></div></div><div class="public anchor" id="var-get-conflict"><h3>get-conflict</h3><div class="usage"><code>(get-conflict CC CO-ID-a CO-ID-b)</code></div><div class="doc"><div class="markdown"><p>Hits the cache for two given operations in O(1). Returns the Conflict record of the operations conflict. Otherwise, returns nil. Requires previous check whether the cache is <a href="kernel.core.conflict-cache.html#var-hittable.3F">hittable?</a>.</p></div></div><div class="src-link"><a href="https://github.com/ekuiter/variED/blob/1792825656c19cb9586e73fc29ec2c3e5e6fd94b/kernel/src/kernel/core/conflict_cache.cljc#L55">view source</a></div></div><div class="public anchor" id="var-hittable.3F"><h3>hittable?</h3><div class="usage"><code>(hittable? CC CO-ID-a CO-ID-b)</code></div><div class="doc"><div class="markdown"><p>Returns whether the conflict cache may be used for two particular operations in O(1). The conflict cache can only be hit for two operations that have not just arrived, as only then the cache has previously been written.</p></div></div><div class="src-link"><a href="https://github.com/ekuiter/variED/blob/1792825656c19cb9586e73fc29ec2c3e5e6fd94b/kernel/src/kernel/core/conflict_cache.cljc#L46">view source</a></div></div><div class="public anchor" id="var-initialize"><h3>initialize</h3><div class="usage"><code>(initialize)</code></div><div class="doc"><div class="markdown"><p>Initializes an empty conflict cache.</p></div></div><div class="src-link"><a href="https://github.com/ekuiter/variED/blob/1792825656c19cb9586e73fc29ec2c3e5e6fd94b/kernel/src/kernel/core/conflict_cache.cljc#L39">view source</a></div></div><div class="public anchor" id="var-insert"><h3>insert</h3><div class="usage"><code>(insert CC CO-ID-a CO-ID-b conflict)</code></div><div class="doc"><div class="markdown"><p>Inserts a new conflict for two operations into the conflict cache in O(1).</p></div></div><div class="src-link"><a href="https://github.com/ekuiter/variED/blob/1792825656c19cb9586e73fc29ec2c3e5e6fd94b/kernel/src/kernel/core/conflict_cache.cljc#L71">view source</a></div></div><div class="public anchor" id="var-make-conflict"><h3>make-conflict</h3><div class="usage"><code>(make-conflict reason)</code></div><div class="doc"><div class="markdown"><p>Creates a new Conflict record that includes a reason for a conflict.</p></div></div><div class="src-link"><a href="https://github.com/ekuiter/variED/blob/1792825656c19cb9586e73fc29ec2c3e5e6fd94b/kernel/src/kernel/core/conflict_cache.cljc#L26">view source</a></div></div><div class="public anchor" id="var-with-most-recent"><h3>with-most-recent</h3><div class="usage"><code>(with-most-recent CC CO-ID)</code></div><div class="doc"><div class="markdown"><p>Sets the conflict cache’s most recently arrived operation.</p></div></div><div class="src-link"><a href="https://github.com/ekuiter/variED/blob/1792825656c19cb9586e73fc29ec2c3e5e6fd94b/kernel/src/kernel/core/conflict_cache.cljc#L64">view source</a></div></div></div></body></html>