<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>kernel.core.movic documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Kernel</span> <span class="project-version">SNAPSHOT</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>kernel</span></div></div></li><li class="depth-2 branch"><a href="kernel.api.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>api</span></div></a></li><li class="depth-2"><a href="kernel.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-3 branch"><a href="kernel.core.causal-dag.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>causal-dag</span></div></a></li><li class="depth-3 branch"><a href="kernel.core.compound-operation.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>compound-operation</span></div></a></li><li class="depth-3 branch"><a href="kernel.core.conflict-cache.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>conflict-cache</span></div></a></li><li class="depth-3 branch"><a href="kernel.core.conflict-relation.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>conflict-relation</span></div></a></li><li class="depth-3 branch"><a href="kernel.core.conflict-resolution.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>conflict-resolution</span></div></a></li><li class="depth-3 branch"><a href="kernel.core.feature-model.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>feature-model</span></div></a></li><li class="depth-3 branch"><a href="kernel.core.garbage-collector.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>garbage-collector</span></div></a></li><li class="depth-3 branch"><a href="kernel.core.history-buffer.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>history-buffer</span></div></a></li><li class="depth-3 branch"><a href="kernel.core.message.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>message</span></div></a></li><li class="depth-3 branch current"><a href="kernel.core.movic.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>movic</span></div></a></li><li class="depth-3 branch"><a href="kernel.core.primitive-operation.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>primitive-operation</span></div></a></li><li class="depth-3 branch"><a href="kernel.core.topological-sort.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>topological-sort</span></div></a></li><li class="depth-3"><a href="kernel.core.vector-clock.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>vector-clock</span></div></a></li><li class="depth-2 branch"><a href="kernel.helpers.html"><div class="inner"><span class="tree" style="top: -424px;"><span class="top" style="height: 433px;"></span><span class="bottom"></span></span><span>helpers</span></div></a></li><li class="depth-2 branch"><a href="kernel.i18n.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>i18n</span></div></a></li><li class="depth-2"><a href="kernel.shell.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>shell</span></div></a></li><li class="depth-3 branch"><a href="kernel.shell.client.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>client</span></div></a></li><li class="depth-3 branch"><a href="kernel.shell.context.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>context</span></div></a></li><li class="depth-3 branch"><a href="kernel.shell.server.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>server</span></div></a></li><li class="depth-3"><a href="kernel.shell.site.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>site</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="kernel.core.movic.html#var-get-all-operations"><div class="inner"><span>get-all-operations</span></div></a></li><li class="depth-1"><a href="kernel.core.movic.html#var-MCG-ID"><div class="inner"><span>MCG-ID</span></div></a></li><li class="depth-1"><a href="kernel.core.movic.html#var-MCGs"><div class="inner"><span>MCGs</span></div></a></li><li class="depth-1"><a href="kernel.core.movic.html#var-MCGS-initialize"><div class="inner"><span>MCGS-initialize</span></div></a></li><li class="depth-1"><a href="kernel.core.movic.html#var-MCGS-remove"><div class="inner"><span>MCGS-remove</span></div></a></li><li class="depth-1"><a href="kernel.core.movic.html#var-MOVIC"><div class="inner"><span>MOVIC</span></div></a></li><li class="depth-1"><a href="kernel.core.movic.html#var-neutral-CG"><div class="inner"><span>neutral-CG</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">kernel.core.movic</h1><div class="doc"><div class="markdown"><p>The MOVIC algorithm introduced by Sun and Chen, 2002 for handling conflicting operations.</p>
<p>The MOVIC algorithm judges all received operations for conflict potential and groups compatible operations into a MCGS (maximum compatible group set). The constructed MCGS is guaranteed to converge across all sites.</p>
<p>The algorithm is copied verbatim from Sun and Chen, 2002, with one major exception: A different conflict/compatible relation is used (<a href="kernel.core.conflict-relation.html">kernel.core.conflict-relation</a>) which has been designed specifically for detecting feature modeling conflicts.</p>
<p>Also, we do not distinguish different objects in a document as Sun and Chen, but consider only one global object, the feature model (instead of, say, single features). This is because features may have arbitrary complex relationships which can not simply be divided in unrelated objects.</p></div></div><div class="public anchor" id="var-get-all-operations"><h3>get-all-operations</h3><div class="usage"><code>(get-all-operations MCGS)</code></div><div class="doc"><div class="markdown"><p>Returns all operations contained in an MCGS.</p></div></div><div class="src-link"><a href="https://github.com/ekuiter/variED/blob/6be8374c3ac8da52f7252f12c2f10c3ffddfca83/kernel/src/kernel/core/movic.cljc#L44">view source</a></div></div><div class="public anchor" id="var-MCG-ID"><h3>MCG-ID</h3><div class="usage"><code>(MCG-ID MCG)</code></div><div class="doc"><div class="markdown"><p>Returns a string that uniquely identifies an MCG (up to hash collisions). In deviation to Sun and Chen’s original paper, we do not use the COID scheme for identification. This is easier to implement, but has the disadvantage that MCGs can not be identified as they evolve - when an operation arrives that is inserted into MCG to produce MCG’, the identifiers of MCG and MCG’ are in no obvious relation to each other. Consequently, versions may “jump” in the user interface until synchronization. We may come back to COID if this turns out to be a problem.</p></div></div><div class="src-link"><a href="https://github.com/ekuiter/variED/blob/6be8374c3ac8da52f7252f12c2f10c3ffddfca83/kernel/src/kernel/core/movic.cljc#L54">view source</a></div></div><div class="public anchor" id="var-MCGs"><h3>MCGs</h3><div class="usage"><code>(MCGs MCGS)</code></div><div class="doc"><div class="markdown"><p>Returns all MCGs contained in an MCGS. This is, in the trivial implementation, just the MCGS.</p></div></div><div class="src-link"><a href="https://github.com/ekuiter/variED/blob/6be8374c3ac8da52f7252f12c2f10c3ffddfca83/kernel/src/kernel/core/movic.cljc#L39">view source</a></div></div><div class="public anchor" id="var-MCGS-initialize"><h3>MCGS-initialize</h3><div class="usage"><code>(MCGS-initialize)</code></div><div class="doc"><div class="markdown"><p>Creates an empty MCGS. Serves as a starting point for the MOVIC algorithm.</p></div></div><div class="src-link"><a href="https://github.com/ekuiter/variED/blob/6be8374c3ac8da52f7252f12c2f10c3ffddfca83/kernel/src/kernel/core/movic.cljc#L25">view source</a></div></div><div class="public anchor" id="var-MCGS-remove"><h3>MCGS-remove</h3><div class="usage"><code>(MCGS-remove MCGS CO-ID)</code></div><div class="doc"><div class="markdown"><p>Removes an operation from every MCG in the MCGS in O(n) for n MCGs.</p></div></div><div class="src-link"><a href="https://github.com/ekuiter/variED/blob/6be8374c3ac8da52f7252f12c2f10c3ffddfca83/kernel/src/kernel/core/movic.cljc#L33">view source</a></div></div><div class="public anchor" id="var-MOVIC"><h3>MOVIC</h3><div class="usage"><code>(MOVIC MCGSi-1 Oi CDAG HB base-FM CC&amp;)</code></div><div class="doc"><div class="markdown"><p>Incrementally constructs an MCGS independent of operation ordering.</p>
<p>The constructed MCGS has the following properties:</p>
<ol>
  <li>Every CG consists of mutually compatible operations.</li>
  <li>Every operation used for construction occurs in at least one CG.</li>
  <li>Any group of compatible operations occurs together in at least one CG.</li>
  <li>Any two CGs contain at least one pair of conflicting operations.</li>
</ol>
<p>The algorithm makes use of atoms, @ and swap! to mutate local variables. No arguments are mutated (except for the conflict cache).</p>
<p>Operations are identified by their IDs, so two different operations with the same parameters will still compare as different due to their IDs. Here, operations are identified by equality, this is okay as long as no transformation of operations is used (because then operations may be classified as different).</p>
<p>An MCGS only contains operation IDs. Operation metadata is looked up in the history buffer.</p>
<p>The CDAG, HB, base-FM and CC&amp; arguments are passed down as context for the conflict detection. The history buffer is used to obtain operation metadata for conflict detection.</p></div></div><div class="src-link"><a href="https://github.com/ekuiter/variED/blob/6be8374c3ac8da52f7252f12c2f10c3ffddfca83/kernel/src/kernel/core/movic.cljc#L65">view source</a></div></div><div class="public anchor" id="var-neutral-CG"><h3>neutral-CG</h3><div class="usage"><code>(neutral-CG MCGS)</code></div><div class="doc"><div class="markdown"><p>Returns the neutral CG by intersecting all MCGs.</p></div></div><div class="src-link"><a href="https://github.com/ekuiter/variED/blob/6be8374c3ac8da52f7252f12c2f10c3ffddfca83/kernel/src/kernel/core/movic.cljc#L49">view source</a></div></div></div></body></html>