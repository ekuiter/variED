<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>kernel.shell.client documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Kernel</span> <span class="project-version">SNAPSHOT</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>kernel</span></div></div></li><li class="depth-2 branch"><a href="kernel.api.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>api</span></div></a></li><li class="depth-2"><a href="kernel.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-3 branch"><a href="kernel.core.causal-dag.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>causal-dag</span></div></a></li><li class="depth-3 branch"><a href="kernel.core.compound-operation.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>compound-operation</span></div></a></li><li class="depth-3 branch"><a href="kernel.core.conflict-cache.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>conflict-cache</span></div></a></li><li class="depth-3 branch"><a href="kernel.core.conflict-relation.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>conflict-relation</span></div></a></li><li class="depth-3 branch"><a href="kernel.core.feature-model.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>feature-model</span></div></a></li><li class="depth-3 branch"><a href="kernel.core.garbage-collector.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>garbage-collector</span></div></a></li><li class="depth-3 branch"><a href="kernel.core.history-buffer.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>history-buffer</span></div></a></li><li class="depth-3 branch"><a href="kernel.core.message.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>message</span></div></a></li><li class="depth-3 branch"><a href="kernel.core.movic.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>movic</span></div></a></li><li class="depth-3 branch"><a href="kernel.core.primitive-operation.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>primitive-operation</span></div></a></li><li class="depth-3 branch"><a href="kernel.core.topological-sort.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>topological-sort</span></div></a></li><li class="depth-3"><a href="kernel.core.vector-clock.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>vector-clock</span></div></a></li><li class="depth-2 branch"><a href="kernel.helpers.html"><div class="inner"><span class="tree" style="top: -393px;"><span class="top" style="height: 402px;"></span><span class="bottom"></span></span><span>helpers</span></div></a></li><li class="depth-2"><a href="kernel.shell.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>shell</span></div></a></li><li class="depth-3 branch current"><a href="kernel.shell.client.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>client</span></div></a></li><li class="depth-3 branch"><a href="kernel.shell.context.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>context</span></div></a></li><li class="depth-3 branch"><a href="kernel.shell.server.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>server</span></div></a></li><li class="depth-3"><a href="kernel.shell.site.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>site</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="kernel.shell.client.html#var-GC.21"><div class="inner"><span>GC!</span></div></a></li><li class="depth-1"><a href="kernel.shell.client.html#var-generate-heartbeat.21"><div class="inner"><span>generate-heartbeat!</span></div></a></li><li class="depth-1"><a href="kernel.shell.client.html#var-generate-inverse-operation.21"><div class="inner"><span>generate-inverse-operation!</span></div></a></li><li class="depth-1"><a href="kernel.shell.client.html#var-generate-operation.21"><div class="inner"><span>generate-operation!</span></div></a></li><li class="depth-1"><a href="kernel.shell.client.html#var-initialize-context-star-topology"><div class="inner"><span>initialize-context-star-topology</span></div></a></li><li class="depth-1"><a href="kernel.shell.client.html#var-initialize-context-star-topology.21"><div class="inner"><span>initialize-context-star-topology!</span></div></a></li><li class="depth-1"><a href="kernel.shell.client.html#var-receive-message.21"><div class="inner"><span>receive-message!</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">kernel.shell.client</h1><div class="doc"><div class="markdown"><p>Client site control.</p>
<p>Generates and receives messages at a client site. Modifies the global context. Site control operations are assumed to run atomically in a single thread, no synchronization is performed.</p></div></div><div class="public anchor" id="var-GC.21"><h3>GC!</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>Runs the garbage collector at a client site. Updates the global context.</p></div></div><div class="src-link"><a href="https://github.com/ekuiter/variED/blob/f91255d5f389ba8762a8746e260ff024e201ff3c/kernel/src/kernel/shell/client.cljc#L117">view source</a></div></div><div class="public anchor" id="var-generate-heartbeat.21"><h3>generate-heartbeat!</h3><div class="usage"><code>(generate-heartbeat!)</code></div><div class="doc"><div class="markdown"><p>Generates a heartbeat message at a client site. Only required to improve the performance of garbage collection.</p></div></div><div class="src-link"><a href="https://github.com/ekuiter/variED/blob/f91255d5f389ba8762a8746e260ff024e201ff3c/kernel/src/kernel/shell/client.cljc#L101">view source</a></div></div><div class="public anchor" id="var-generate-inverse-operation.21"><h3>generate-inverse-operation!</h3><div class="usage"><code>(generate-inverse-operation!)</code></div><div class="doc"><div class="markdown"><p><strong>TODO</strong>: Generates an inverse operation concurrent to all following operations. It should be sufficient to just take the inverted operation’s timestamp, increment it, and use that as the inverse operation’s timestamp.</p></div></div><div class="src-link"><a href="https://github.com/ekuiter/variED/blob/f91255d5f389ba8762a8746e260ff024e201ff3c/kernel/src/kernel/shell/client.cljc#L94">view source</a></div></div><div class="public anchor" id="var-generate-operation.21"><h3>generate-operation!</h3><div class="usage"><code>(generate-operation! PO-sequence)</code></div><div class="doc"><div class="markdown"><p>Generates a new operation message from a sequence of primitive operations at a client site. The PO sequence CO is assumed to be a valid operation on the current feature model. No operation may be generated when the system is frozen due to conflict.</p>
<p>Creates a compound operation from the PO sequence, then updates the global context. <strong>OPTIMIZE</strong>: Because generation happens atomically with processing and application, some optimizations are possible: Because CO was generated on the most recent CDAG and HB (and there is also only one CG, otherwise the system is frozen so no conflicts in CP are possible) CP(CO) = all operations in CDAG and HB, so this can be implemented faster than CDAG-insert (whereas the CIP can not be optimized easily).</p>
<p>Calls the MOVIC algorithm with the new operation <em>after</em> the CDAG, HB and CC have been updated. <strong>OPTIMIZE</strong>: We know (see above), that at generation time there is only one CG and CO has been generated and valid (and targeted at that CG), i.e., the new MCGS will simply be MCGS = {old-CG + {CO}} (CO conjoined on the old CG).</p>
<p>Returns the (updated) current feature model and the generated operation message.</p></div></div><div class="src-link"><a href="https://github.com/ekuiter/variED/blob/f91255d5f389ba8762a8746e260ff024e201ff3c/kernel/src/kernel/shell/client.cljc#L57">view source</a></div></div><div class="public anchor" id="var-initialize-context-star-topology"><h3>initialize-context-star-topology</h3><div class="usage"><code>(initialize-context-star-topology site-ID {VC :VC, CDAG :CDAG, base-FM :base-FM, HB :HB, CC :CC, MCGS :MCGS, FM :FM, GC :GC})</code></div><div class="doc"><div class="markdown"><p>Initializes global context for a new client site in a star topology. Called when the site is ready to generate and receive operations and the server has transmitted the initial context.</p></div></div><div class="src-link"><a href="https://github.com/ekuiter/variED/blob/f91255d5f389ba8762a8746e260ff024e201ff3c/kernel/src/kernel/shell/client.cljc#L24">view source</a></div></div><div class="public anchor" id="var-initialize-context-star-topology.21"><h3>initialize-context-star-topology!</h3><div class="usage"><code>(initialize-context-star-topology! site-ID context)</code></div><div class="doc"><div class="markdown"><p>Initializes global context for a new client site in a star topology. Resets the global context.</p></div></div><div class="src-link"><a href="https://github.com/ekuiter/variED/blob/f91255d5f389ba8762a8746e260ff024e201ff3c/kernel/src/kernel/shell/client.cljc#L48">view source</a></div></div><div class="public anchor" id="var-receive-message.21"><h3>receive-message!</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>Receives a message at a client site. Returns the (updated) current feature model.</p></div></div><div class="src-link"><a href="https://github.com/ekuiter/variED/blob/f91255d5f389ba8762a8746e260ff024e201ff3c/kernel/src/kernel/shell/client.cljc#L112">view source</a></div></div></div></body></html>