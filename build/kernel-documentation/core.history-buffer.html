<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>core.history-buffer documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Kernel</span> <span class="project-version">SNAPSHOT</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1 branch"><a href="api.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>api</span></div></a></li><li class="depth-1"><a href="core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch"><a href="core.causal-dag.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>causal-dag</span></div></a></li><li class="depth-2 branch"><a href="core.compound-operation.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>compound-operation</span></div></a></li><li class="depth-2 branch"><a href="core.conflict-cache.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>conflict-cache</span></div></a></li><li class="depth-2 branch"><a href="core.conflict-relation.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>conflict-relation</span></div></a></li><li class="depth-2 branch"><a href="core.feature-model.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>feature-model</span></div></a></li><li class="depth-2 branch"><a href="core.garbage-collector.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>garbage-collector</span></div></a></li><li class="depth-2 branch current"><a href="core.history-buffer.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>history-buffer</span></div></a></li><li class="depth-2 branch"><a href="core.message.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>message</span></div></a></li><li class="depth-2 branch"><a href="core.movic.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>movic</span></div></a></li><li class="depth-2 branch"><a href="core.primitive-operation.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>primitive-operation</span></div></a></li><li class="depth-2 branch"><a href="core.topological-sort.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>topological-sort</span></div></a></li><li class="depth-2"><a href="core.vector-clock.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>vector-clock</span></div></a></li><li class="depth-1 branch"><a href="helpers.html"><div class="inner"><span class="tree" style="top: -393px;"><span class="top" style="height: 402px;"></span><span class="bottom"></span></span><span>helpers</span></div></a></li><li class="depth-1"><a href="shell.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>shell</span></div></a></li><li class="depth-2 branch"><a href="shell.client.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>client</span></div></a></li><li class="depth-2 branch"><a href="shell.context.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>context</span></div></a></li><li class="depth-2 branch"><a href="shell.server.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>server</span></div></a></li><li class="depth-2"><a href="shell.site.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>site</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="core.history-buffer.html#var-_filter"><div class="inner"><span>_filter</span></div></a></li><li class="depth-1"><a href="core.history-buffer.html#var-_remove"><div class="inner"><span>_remove</span></div></a></li><li class="depth-1"><a href="core.history-buffer.html#var-initialize"><div class="inner"><span>initialize</span></div></a></li><li class="depth-1"><a href="core.history-buffer.html#var-insert"><div class="inner"><span>insert</span></div></a></li><li class="depth-1"><a href="core.history-buffer.html#var-lookup"><div class="inner"><span>lookup</span></div></a></li><li class="depth-1"><a href="core.history-buffer.html#var-lookup*"><div class="inner"><span>lookup*</span></div></a></li><li class="depth-1"><a href="core.history-buffer.html#var-remove-site"><div class="inner"><span>remove-site</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">core.history-buffer</h1><div class="doc"><div class="markdown"><p>History Buffer, HB for short. Serves as a central storage for operation metadata. Only a performance optimization and not essential.</p>
<p>Operations have to be stored in various data structures of a site. To avoid redundancy, all operation metadata is kept in the history buffer. The history buffer maps operation IDs to operations, so that other data structures only need to save an operation’s ID to be able to do a <a href="core.history-buffer.html#var-lookup">lookup</a>. It is guaranteed to contain operation metadata for all operations that have not been garbage collected.</p>
<p>In contrast to other collaborative real-time editors, the history buffer is <em>not</em> ordered.</p>
<p>Without garbage collection, the history buffer may grow linearly over time.</p></div></div><div class="public anchor" id="var-_filter"><h3>_filter</h3><div class="usage"><code>(_filter HB fn)</code></div><div class="doc"><div class="markdown"><p>Returns a set of all operations in the history buffer that match a given predicate in O(n). The predicate is passed an operation.</p></div></div><div class="src-link"><a href="https://github.com/ekuiter/variED/blob/a722c628d17644ff86a512bf2f508d7327d738d1/kernel/src/core/history_buffer.clj#L39">view source</a></div></div><div class="public anchor" id="var-_remove"><h3>_remove</h3><div class="usage"><code>(_remove HB CO-ID)</code></div><div class="doc"><div class="markdown"><p>Removes an operation from the history buffer in O(1).</p></div></div><div class="src-link"><a href="https://github.com/ekuiter/variED/blob/a722c628d17644ff86a512bf2f508d7327d738d1/kernel/src/core/history_buffer.clj#L56">view source</a></div></div><div class="public anchor" id="var-initialize"><h3>initialize</h3><div class="usage"><code>(initialize)</code></div><div class="doc"><div class="markdown"><p>Initializes a new history buffer without operations.</p></div></div><div class="src-link"><a href="https://github.com/ekuiter/variED/blob/a722c628d17644ff86a512bf2f508d7327d738d1/kernel/src/core/history_buffer.clj#L22">view source</a></div></div><div class="public anchor" id="var-insert"><h3>insert</h3><div class="usage"><code>(insert HB CO)</code></div><div class="doc"><div class="markdown"><p>Inserts a newly received operation into the history buffer in O(1).</p></div></div><div class="src-link"><a href="https://github.com/ekuiter/variED/blob/a722c628d17644ff86a512bf2f508d7327d738d1/kernel/src/core/history_buffer.clj#L51">view source</a></div></div><div class="public anchor" id="var-lookup"><h3>lookup</h3><div class="usage"><code>(lookup HB CO-ID)</code></div><div class="doc"><div class="markdown"><p>Returns the operation for a given operation ID in O(1), if any.</p></div></div><div class="src-link"><a href="https://github.com/ekuiter/variED/blob/a722c628d17644ff86a512bf2f508d7327d738d1/kernel/src/core/history_buffer.clj#L29">view source</a></div></div><div class="public anchor" id="var-lookup*"><h3>lookup*</h3><div class="usage"><code>(lookup* HB CO-IDs)</code></div><div class="doc"><div class="markdown"><p>For a given sequence of operation IDs, returns the associated operations in the same order in O(n).</p></div></div><div class="src-link"><a href="https://github.com/ekuiter/variED/blob/a722c628d17644ff86a512bf2f508d7327d738d1/kernel/src/core/history_buffer.clj#L34">view source</a></div></div><div class="public anchor" id="var-remove-site"><h3>remove-site</h3><div class="usage"><code>(remove-site HB site-ID)</code></div><div class="doc"><div class="markdown"><p>Removes the given site from all operations’ vector clocks in the history buffer in O(n).</p></div></div><div class="src-link"><a href="https://github.com/ekuiter/variED/blob/a722c628d17644ff86a512bf2f508d7327d738d1/kernel/src/core/history_buffer.clj#L61">view source</a></div></div></div></body></html>